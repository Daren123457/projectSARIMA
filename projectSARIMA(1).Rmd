---
title: "ProjectSARIMA" 
output:
  html_document: default
  pdf_document: default
date: "2022-11-16"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# 1. Load Packages/Library
```{r}
# masukkan semua library yang dibutuhkan disini atau bertambah sesuai dengan kebutuhan, misalnya
library(dplyr) #library digunakan untuk manipulasi data
library(ggplot2) #library digunakan untuk visualiasi data
library(lubridate) #library digunakan untuk mengatur dan mengubah data berbentuk tanggal
library(tidyverse) #library digunakan untuk membantu kegiatan data analysis, dimana didalamnya juga termasuk library dplyr dan ggplot2 
library(tseries) #library untuk membantu kegiatan analysis untuk data yang bersifat time series 
```



# 2. Obtain Data
```{r}
Data.SPKU <- read.csv("C:/Users/suria/Downloads/Tugas Akhir/Bab 3/Data SPKU.csv")
```
Kita akan menggunakan perintah read.csv untuk mengimport dataset yang akan digunakan dalam penelitian nantinya

# 3. Scrub Data
## a. Melihat Summary data
```{r}
# your code
glimpse(Data.SPKU)
```
Dengan menggunakan perintah glimpse kita dapat melihat bahwa pada dataset ISPU masih memiliki data kosong(missing value) serta tipe data yang juga salah pada variabel tanggal serta beberapa variabel lainnya


## b. Mengubah tipe data variabel
```{r}
Data.SPKU <- Data.SPKU %>%
  mutate(Tanggal = lubridate::mdy(Tanggal))

glimpse(Data.SPKU)
```
Perintah diatas merupakan perintah untuk mengubah tipe data dari Tanggal yang awalnya bertipe char menjadi bertipe date agar dapat digunakan dalam peramalan nantinya

```{r}
Data.SPKU$pm10= as.numeric(as.character(Data.SPKU$pm10)) 
Data.SPKU$so2= as.numeric(as.character(Data.SPKU$so2)) 
Data.SPKU$co= as.numeric(as.character(Data.SPKU$co)) 
Data.SPKU$o3= as.numeric(as.character(Data.SPKU$o3)) 
Data.SPKU$no2= as.numeric(as.character(Data.SPKU$no2)) 
Data.SPKU$Max= as.numeric(as.character(Data.SPKU$Max)) 

```

Selanjutnya adalah perintah untuk mengubah tipe data dari keenam variabel yaitu pm10, so2, co, o3, no2, dan Max yang awalnya bertipe char menjadi bertipe numeric


```{r}
glimpse(Data.SPKU)
```
Dapat dilihat sekarang tipe data yang ada saat ini sudah berubah dari yang awalnya bertipe char sudah menjadi date dan juga double pada dataset yang kita gunakan

## c. Membersihkan data yang Missing Value
```{r}
# your code
colSums(is.na(Data.SPKU))
```
Perintah diatas merupakan perintah yang digunakan untuk melihat data yang tidak memiliki nilai(missing value). Data yang tidak ada nilainya ini harus kita hapus agar nantinya tidak mempengaruhi hasil dari peramalan.

```{r}
Data.SPKU <- na.omit(Data.SPKU)
```
Perintah diatas merupakan perintah untuk mengeluarkan data yang tidak memiliki nilai dari dataset supaya nantinya tidak akan mempengaruhi hasil dari peramalan


```{r}
colSums(is.na(Data.SPKU))
```
Setelah kita cek kembali dengan perintah colSums dapat dilihat bahwa sudah tidak ada data yang tidak memiliki nilai(Missing Value) di dalam dataset yang akan kita gunakan nantinya.



```{r}
sum(duplicated(Data.SPKU))
```
Selanjutnya setelah memastikan atribut dari variabel telah sesuai dan tidak ada missing value lagi di dalamnya, akan menggunakan perintah duplicated untuk mengecek apakah di dataset yang kita gunakan masih ada data yang sama/berulang. Dapat dilihat dari hasilnya didapatkan bahwa sudah tidak ada data duplikat di dalam dataset yang digunakan  



Berikut merupakan tampilan dari dataset setelah dilakukan Scrubbing 

```{r}
glimpse(Data.SPKU)
```

# 4. Explore Data
## a. Analisis Deskriptif

Dalam tahapan explore data, pertama-tama kita dapat menggunakan perintah summary() untuk melihat ringkasan dari dataset yang kita gunakan. Ringkasan ini akan sangat berguna untuk menampilkan data statistik yang dapat membantu kita dalam melakukan analisis Deskriptif

```{r}
summary(Data.SPKU)
```

Dibawah ini dilakukan pengujian stasioneritas dengan uji Augmented Dickey Fuller (ADF) yang dibantu dengan perintah adf.test() dari package tseries 
```{r}
adf.test(Data.SPKU$pm10)
adf.test(Data.SPKU$so2)
adf.test(Data.SPKU$co)
adf.test(Data.SPKU$o3)
adf.test(Data.SPKU$no2)
adf.test(Data.SPKU$Max)
```
Dapat dilihat dari hasil diatas bahwa keenam variabel memiliki nilai p-value dibawah 0.01 yang mana artinya datanya sudah stasioner karena bernilai dibawah 5% atau 0.05



## b. Visualisasi Data
### b.1 Visualisasi Data Partikulat Polusi Udara

Dibawah ini merupakan grafik yang menggambarkan nilai dari data variabel partikulat polusi udara dengan tanggal pada kelima stasiun di Jakarta

```{r}
ggplot(data = Data.SPKU) + 
  geom_line(mapping = aes(x = Tanggal, y = pm10, color = Stasiun))+
labs(title = "Grafik pm10")
```
Pada grafik pertama yang menggambarkan data pm10 ini dapat dilihat secara umum data partikulat pm10 yang direkam tertinggi berada pada Stasiun DKI4 dengan nilai tertinggi berada pada akhir tahun 2021 sedangkan nilai terendah berada pada Stasiun DKI3 pada akhir tahun 2017


```{r}
ggplot(data = Data.SPKU) + 
  geom_line(mapping = aes(x = Tanggal, y = so2, color = Stasiun))+
labs(title = "Grafik so2")
```
Pada grafik kedua yang menggambarkan data so2 ini dapat dilihat secara umum data partikulat so2 yang direkam tertinggi berada pada Stasiun DKI3 dengan nilai tertinggi berada pada akhir tahun 2020 sedangkan nilai terendah berada pada Stasiun DKI2 pada awal tahun 2016

```{r}
ggplot(data = Data.SPKU) + 
  geom_line(mapping = aes(x = Tanggal, y = co, color = Stasiun))+
labs(title = "Grafik co")
```
Pada grafik ketiga yang menggambarkan data co ini dapat dilihat secara umum data partikulat co yang direkam tertinggi berada pada Stasiun DKI5 dengan nilai tertinggi berada pada akhir tahun 2020 sedangkan nilai terendah berada pada Stasiun DKI5 pada akhir triwulan pertama pada tahun 2017

```{r}
ggplot(data = Data.SPKU) + 
  geom_line(mapping = aes(x = Tanggal, y = o3, color = Stasiun))+
labs(title = "Grafik o3")
```
Pada grafik keempat yang menggambarkan data o3 ini dapat dilihat secara umum data partikulat o3 yang direkam tertinggi berada pada Stasiun DKI5 dengan nilai tertinggi berada pada akhir triwulan pertama pada tahun 2019 sedangkan nilai terendah berada pada Stasiun DKI5 pada awal triwulan ketiga pada tahun 2020

```{r}
ggplot(data = Data.SPKU) + 
  geom_line(mapping = aes(x = Tanggal, y = no2, color = Stasiun))+
labs(title = "Grafik no2")
```
Pada grafik kelima yang menggambarkan data no2 ini dapat dilihat secara umum data partikulat no2 yang direkam tertinggi berada pada Stasiun DKI2 dengan nilai tertinggi berada pada akhir tahun 2020 sedangkan untuk nilai terendah terbagi merata pada kelima Stasiun dari awal tahun 2016 hingga akhir tahun 2018

```{r}
ggplot(data = Data.SPKU) + 
  geom_line(mapping = aes(x = Tanggal, y = Max, color = Stasiun))+
labs(title = "Grafik Max")
```
Pada grafik keenam yang menggambarkan data Max dari keseluruhan partikulat ini dapat dilihat secara umum data tertinggi yang direkam terdapat pada Stasiun DKI5 di tahun 2019 sedangkan nilai terendah berada pada Stasiun DKI4 pada awal triwulan ketiga tahun 2020



### b.2 Visualisasi Data PM10 berdasar salah satu Stasiun

Sebelum melakukan visualisasi terpisah antara tiap stasiun, untuk merapikan tampilan dari grafik nantinya terlebih dahulu buat vector yang akan digunakan untuk mempersingkat nama stasiun yang akan digunakan menjadi label 
```{r}
Nama_Stasiun <- c(
                    `DKI1 (Bunderan HI)` = "DKI 1",
                    `DKI2 (Kelapa Gading)` = "DKI 2",
                    `DKI3 (Jagakarsa)` = "DKI 3",
                    `DKI4 (Lubang Buaya)` = "DKI 4",
                    `DKI5 (Kebon Jeruk)`="DKI 5"
                    )
```


Dibawah ini merupakan tampilan grafik partikulat pm10 yang dipisahkan berdasarkan berdasarkan stasiun perekaman data tersebut. 
```{r}
ggplot(Data.SPKU, aes(x=Tanggal, y=pm10, group=Stasiun)) + 
  geom_line(aes())+ facet_grid(Stasiun ~ ., scales='free', labeller = as_labeller(Nama_Stasiun))
```

Dibawah ini merupakan tampilan grafik partikulat so2 yang dipisahkan berdasarkan berdasarkan stasiun perekaman data tersebut. 
```{r}
ggplot(Data.SPKU, aes(x=Tanggal, y=so2, group=Stasiun)) + 
  geom_line(aes())+ facet_grid(Stasiun ~ ., scales='free', labeller = as_labeller(Nama_Stasiun))
```

Dibawah ini merupakan tampilan grafik partikulat co yang dipisahkan berdasarkan berdasarkan stasiun perekaman data tersebut. 
```{r}
ggplot(Data.SPKU, aes(x=Tanggal, y=co, group=Stasiun)) + 
  geom_line(aes())+ facet_grid(Stasiun ~ ., scales='free', labeller = as_labeller(Nama_Stasiun))
```

Dibawah ini merupakan tampilan grafik partikulat o3 yang dipisahkan berdasarkan berdasarkan stasiun perekaman data tersebut. 
```{r}
ggplot(Data.SPKU, aes(x=Tanggal, y=o3, group=Stasiun)) + 
  geom_line(aes())+ facet_grid(Stasiun ~ ., scales='free', labeller = as_labeller(Nama_Stasiun))
```

Dibawah ini merupakan tampilan grafik partikulat no2 yang dipisahkan berdasarkan berdasarkan stasiun perekaman data tersebut. 
```{r}
ggplot(Data.SPKU, aes(x=Tanggal, y=no2, group=Stasiun)) + 
  geom_line(aes())+ facet_grid(Stasiun ~ ., scales='free', labeller = as_labeller(Nama_Stasiun))
```

Dibawah ini merupakan tampilan grafik partikulat Max yang dipisahkan berdasarkan berdasarkan stasiun perekaman data tersebut. 
```{r}
ggplot(Data.SPKU, aes(x=Tanggal, y=Max, group=Stasiun)) + 
  geom_line(aes())+ facet_grid(Stasiun ~ ., scales='free', labeller = as_labeller(Nama_Stasiun))
```


Note: Bagian ini bisa disesuaikan dengan kebutuhan ekplorasi. jadi poin2 dari visualiasi bisa ditambah berdasarkan kebutuhan

# 4. Model
Definisikan model prediksi yang akan dilakukan berdasarkan metode yg digunakan LSTM/Prophet/SARIMA

## a. Pembagian Dataset
```{r}
# your code
```

## b. Model Prediksi PM10
```{r}
# your code
```

## c. Model Prediksi CO
.
.
.
dst

## d. Validasi Model
```{r}
# your code
```


Setiap aktivitas dan hasilnya harus diinterpretasikan dan dituliskan dibawah hasilny sesuai dengan metode prediksi yang digunakan

# 5. Iterpret
Jelaskan interpretasi hasil validasi dari model yg dilakukan dan simpulkan untuk masing-masing